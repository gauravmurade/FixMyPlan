<!DOCTYPE html>
{% autoescape true %}
<html>
<head>
  <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
</head>
  <body onload="setDefaultValues()">
	<div id="header">
        <h1>FixMyPlan</h1>
    </div>	
	<div id="content">
		{% if errorNo == 1 %}
			<p style="color:red;">Please specify a resource name! Try editing again.</p>
		{% elif errorNo == 2 %}
			<p style="color:red;">End Time cannot be less than or equal to the Start Time! Try editing again.</p>
		{% elif errorNo == 3 %}
			<p style="color:red;">The resource name already exists. Please choose another name! Try editing again.</p>
		{% endif %}	
		<strong>Resource Details :</strong>
		<br>
		<br>
		<div id="EditableView" style = "border-style: none;display:none;">
			<form action="/resources/{{ thisResource.name }}" method="post">
			  Resource Name : <input name="name"  value = {{ thisResource.name }}></input>
				<br>
			  Start Time : 
				<select id = "STH" name="StartTimeHour">
				  <option value="01">01</option>
				  <option value="02">02</option>
				  <option value="03">03</option>
				  <option value="04">04</option>
				  <option value="05">05</option>
				  <option value="06">06</option>
				  <option value="07">07</option>
				  <option value="08">08</option>
				  <option value="09">09</option>
				  <option value="10">10</option>
				  <option value="11">11</option>
				  <option value="12">12</option>
				</select>
				<select id = "STM" name="StartTimeMin">
				  <option value="00">00</option>
				  <option value="01">01</option>
				  <option value="02">02</option>
				  <option value="03">03</option>
				  <option value="04">04</option>
				  <option value="05">05</option>
				  <option value="06">06</option>
				  <option value="07">07</option>
				  <option value="08">08</option>
				  <option value="09">09</option>
				  <option value="10">10</option>
				  <option value="11">11</option>
				  <option value="12">12</option>
				  <option value="13">13</option>
				  <option value="14">14</option>
				  <option value="15">15</option>
				  <option value="16">16</option>
				  <option value="17">17</option>
				  <option value="18">18</option>
				  <option value="19">19</option>
				  <option value="20">20</option>
				  <option value="21">21</option>
				  <option value="22">22</option>
				  <option value="23">23</option>
				  <option value="24">24</option>
				  <option value="25">25</option>
				  <option value="26">26</option>
				  <option value="27">27</option>
				  <option value="28">28</option>
				  <option value="29">29</option>
				  <option value="30">30</option>
				  <option value="31">31</option>
				  <option value="32">32</option>
				  <option value="33">33</option>
				  <option value="34">34</option>
				  <option value="35">35</option>
				  <option value="36">36</option>
				  <option value="37">37</option>
				  <option value="38">38</option>
				  <option value="39">39</option>
				  <option value="40">40</option>
				  <option value="41">41</option>
				  <option value="42">42</option>
				  <option value="43">43</option>
				  <option value="44">44</option>
				  <option value="45">45</option>
				  <option value="46">46</option>
				  <option value="47">47</option>
				  <option value="48">48</option>
				  <option value="49">49</option>
				  <option value="50">50</option>
				  <option value="51">51</option>
				  <option value="52">52</option>
				  <option value="53">53</option>
				  <option value="54">54</option>
				  <option value="55">55</option>
				  <option value="56">56</option>
				  <option value="57">57</option>
				  <option value="58">58</option>
				  <option value="59">59</option>
				</select>
				<select id = "STF" name="StartTimeFormat">
				  <option value="AM">AM</option>
				  <option value="PM">PM</option>
				</select>
				<br>
			  End Time : 
				<select id = "ETH" name="EndTimeHour">
				  <option value="01">01</option>
				  <option value="02">02</option>
				  <option value="03">03</option>
				  <option value="04">04</option>
				  <option value="05">05</option>
				  <option value="06">06</option>
				  <option value="07">07</option>
				  <option value="08">08</option>
				  <option value="09">09</option>
				  <option value="10">10</option>
				  <option value="11">11</option>
				  <option value="12">12</option>
				</select>
				<select id = "ETM" name="EndTimeMin">
				  <option value="00">00</option>
				  <option value="01">01</option>
				  <option value="02">02</option>
				  <option value="03">03</option>
				  <option value="04">04</option>
				  <option value="05">05</option>
				  <option value="06">06</option>
				  <option value="07">07</option>
				  <option value="08">08</option>
				  <option value="09">09</option>
				  <option value="10">10</option>
				  <option value="11">11</option>
				  <option value="12">12</option>
				  <option value="13">13</option>
				  <option value="14">14</option>
				  <option value="15">15</option>
				  <option value="16">16</option>
				  <option value="17">17</option>
				  <option value="18">18</option>
				  <option value="19">19</option>
				  <option value="20">20</option>
				  <option value="21">21</option>
				  <option value="22">22</option>
				  <option value="23">23</option>
				  <option value="24">24</option>
				  <option value="25">25</option>
				  <option value="26">26</option>
				  <option value="27">27</option>
				  <option value="28">28</option>
				  <option value="29">29</option>
				  <option value="30">30</option>
				  <option value="31">31</option>
				  <option value="32">32</option>
				  <option value="33">33</option>
				  <option value="34">34</option>
				  <option value="35">35</option>
				  <option value="36">36</option>
				  <option value="37">37</option>
				  <option value="38">38</option>
				  <option value="39">39</option>
				  <option value="40">40</option>
				  <option value="41">41</option>
				  <option value="42">42</option>
				  <option value="43">43</option>
				  <option value="44">44</option>
				  <option value="45">45</option>
				  <option value="46">46</option>
				  <option value="47">47</option>
				  <option value="48">48</option>
				  <option value="49">49</option>
				  <option value="50">50</option>
				  <option value="51">51</option>
				  <option value="52">52</option>
				  <option value="53">53</option>
				  <option value="54">54</option>
				  <option value="55">55</option>
				  <option value="56">56</option>
				  <option value="57">57</option>
				  <option value="58">58</option>
				  <option value="59">59</option>
				</select>
				<select id = "ETF" name="EndTimeFormat">
				  <option value="AM">AM</option>
				  <option value="PM">PM</option>
				</select>
				<br>
				  Tags : <input name="tags" value = "{{ tagString }}"></input>
				<br>
			<input type="submit" value="Save">
			</form>
		</div>	

		<div id="NonEditableView" style = "border-style: none;">
			Resource Name :
			<a href="/resources/{{ thisResource.name }} "> {{ thisResource.name }} </a>
			<br>
			Start Time : {{ thisResource.startTimeDisp }}
			<br>
			End Time : {{ thisResource.endTimeDisp }}
			<br>
			Tags : 
			{% for tag in thisResource.tags %}
				<a href="/tags/{{  tag  }} "> {{  tag  }} </a>
			{% endfor %}
			<br>
		</div>	
		{% if owner  %}
			<input id = "ResourceEdit" type="submit" value="Edit" onclick="activateEditable()">
		{% endif %}
	<br>
	<br>
	<strong>Current and Future Reservations :</strong>
		<br>
		<br>
		{% for activeReservation in activeReservations %}
			Reserved by : 
			<a href="/user"> {{ activeReservation.owner }} </a>
			<br>
			Resource Name : 
			<a href="/resources/{{ activeReservation.name }} "> {{ activeReservation.name }} </a>
			<br>
			Start Time : {{ activeReservation.startTimeDisp }} on 
						 {{ activeReservation.dateDisp }}
			<br>
			Duration : {{ activeReservation.durationDisp }}
			<br>
			<br>
		{% endfor %}

		<a href="{{ createReservationURL }}">Create a reservation</a>
		<br>
	</div>
	<div id="business">
		<a href="/" style = "float:left">Back to Home Page</a>
		<a href="{{ url|safe }}" style = "float:right">{{ url_linktext }}</a>
	</div>
	<script>
    function activateEditable()
    {
		document.getElementById("NonEditableView").style.display = "none";
		document.getElementById("EditableView").style.display = "block";
		document.getElementById("ResourceEdit").style.display = "none";
	}
    function setDefaultValues(s, valsearch)
    {
		for (i = 0; i< s.options.length; i++)
		{ 
			if (s.options[i].value == valsearch)
			{
				s.options[i].selected = true;
				break;
			}
		}
		return;			
	}
	var STH = "{{ thisResource.startTimeHour }}";
	var STM = "{{ thisResource.startTimeMin }}";
	var STF = "{{ thisResource.startTimeFormat }}";
	var ETH = "{{ thisResource.endTimeHour }}";
	var ETM = "{{ thisResource.endTimeMin }}";
	var ETF = "{{ thisResource.endTimeFormat }}";
	setDefaultValues(document.getElementById("STH"), STH);
	setDefaultValues(document.getElementById("STM"), STM);
	setDefaultValues(document.getElementById("STF"), STF);
	setDefaultValues(document.getElementById("ETH"), ETH);
	setDefaultValues(document.getElementById("ETM"), ETM);
	setDefaultValues(document.getElementById("ETF"), ETF);
	</script>
	</body>
</html>
{% endautoescape %}	